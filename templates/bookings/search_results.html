<!-- search_results.html -->
{% extends 'base.html' %}

{% block content %}
{% include 'customers/cover.html' %}
<h2>Search Results</h2>
{% if nearby_shops %}
<section id="services" class="services section-bg">
<div class="container-xl">
      <div class="row">
        <div class="col-md-12">
          <h2>Featured <b>Services</b></h2>
          <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="0">
            <!-- Wrapper for carousel items -->
            <div class="carousel-inner">
              <div class="row">
                {% for shop in nearby_shops %}
                <div class="col-sm-3">
                  <a href="" class="product-link">
                    <div class="thumb-wrapper">
                      <span class="wish-icon"><i class="fa fa-heart-o"></i></span>
                      <div class="img-box">
                        <img src="{{ shop.shop_image.url }}" class="img-fluid" alt="{{ shop.shop_name }}">
                      </div>
                      <div class="thumb-content">
                        <h4>{{ shop.shop_name }}</h4>
                        <h4>Vehicle Choices: {{ shop.get_vehicles_display }}</h4>
                        <h4>Services:</h4>
                        <ul>
                          {% for service in shop.services.all %}
                          <li>{{ service.name }}</li>
                          {% endfor %}
                        </ul>
                        <a href="{% url 'book_service' shop_id=shop.id  %}" class="btn btn-primary">Book Service</a>
                      </div>
                    </div>
                  </a>
                </div>
                {% endfor %}
              </div>
            </div>           
          </div>
        </div>
      </div>
    </div>
  </div>  
{% else %}
    <p>No shops found within the specified distance and services. Try again</p>
    <div class="d-flex justify-content-center justify-content-lg-start">
        <a href="{% url 'pinpoint_address' %}" class="btn btn-success">Book a Service</a>
      </div>
      <br>
{% endif %}

</section>
{% endblock %}
